"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}var _require=require("path"),extname=_require.extname,_require2=require("ramda"),invertObj=_require2.invertObj,takeWhile=_require2.takeWhile,NPC_DOMAIN="http://www.public.navy.mil",MAX_MESSAGE_TEXT_LENGTH=5e3,MESSAGE_TYPE_LOOKUP={NAV:"NAVADMIN",ALN:"ALNAV"},YEAR_FORMAT_LENGTH=2,createMessageId=function(a){var b=a.type,c=a.year,d=a.num;return"".concat(b).concat(c).concat(d)},createNpcPageUrl=function(a){var b=a.type,c=a.year;// eslint-disable-line no-magic-numbers
return"".concat(NPC_DOMAIN,"/bupers-npc/reference/messages/").concat(b,"S/Pages/").concat(b,"20").concat(function format(a){return(a+"").length===4?+a.substr(-2):a}(c),".aspx")},createMessageUrl=function(a){var b=a.num,c=a.type,d=a.year,e=invertObj(MESSAGE_TYPE_LOOKUP)[c],f=parseInt(d,10),g="NAV"===e,h=18>f,i="bupers-npc/reference/messages/Documents".concat(g&&h?"2":"");return"".concat(NPC_DOMAIN,"/").concat(i,"/").concat(g&&!h||"ALN"===e?"".concat(c,"S/"):"").concat(e,"20").concat(d,"/").concat(e).concat(d).concat(b,".txt")},createYearsString=function(a){return a.sort().slice(0,-1).map(function(a){return"20".concat(a)}).join(", ").concat("".concat(2<a.length?",":"").concat(1<a.length?" and ":"","20").concat(a.slice(-1)))},dict=function(a){return new Map(Object.entries(a))},getCurrentYear=function(){return+(new Date().getFullYear()+"").substring(2)},isNotNumber=function(a){return isNaN(+a)},isNumberLike=function(a){return!isNaN(+a)},parseMessageName=function(a){var b=takeWhile(isNotNumber,(0,_toConsumableArray2["default"])(a)).join("").toUpperCase(),c=MESSAGE_TYPE_LOOKUP[b],d=a.substring(b.length,b.length+YEAR_FORMAT_LENGTH),e=a.substring(b.length+YEAR_FORMAT_LENGTH),f=createMessageUrl({num:e,type:c,year:d}),g=createMessageId({num:e,type:c,year:d});return{code:b,id:g,num:e,type:c,url:f,year:d}},parseMessageId=function(a){var b=takeWhile(isNotNumber,(0,_toConsumableArray2["default"])(a)).join("").toUpperCase(),c=invertObj(MESSAGE_TYPE_LOOKUP)[b],d=a.substring(b.length,b.length+YEAR_FORMAT_LENGTH),e=a.substring(b.length+YEAR_FORMAT_LENGTH),f="".concat(c).concat(d).concat(e);return parseMessageName(f)},parseMessageUri=function(a){var b=a.split("/").reverse(),c=(0,_slicedToArray2["default"])(b,1),d=c[0],e=d.split("."),f=(0,_slicedToArray2["default"])(e,1),g=f[0],h=extname(a);return _objectSpread({},parseMessageName(g),{ext:h})},partitionByKeyLength=function(a,b,c){var d=c[a]+"",e=Math.ceil(d.length/b);return(0,_toConsumableArray2["default"])("x".repeat(e)).map(function(e,f){var g=f*b;return _objectSpread({},c,(0,_defineProperty2["default"])({},a,d.substring(g,g+b)))})};module.exports={MAX_MESSAGE_TEXT_LENGTH:MAX_MESSAGE_TEXT_LENGTH,NPC_DOMAIN:NPC_DOMAIN,createMessageId:createMessageId,createMessageUrl:createMessageUrl,createNpcPageUrl:createNpcPageUrl,createYearsString:createYearsString,dict:dict,getCurrentYear:getCurrentYear,isNotNumber:isNotNumber,isNumberLike:isNumberLike,parseMessageId:parseMessageId,parseMessageName:parseMessageName,parseMessageUri:parseMessageUri,partitionByKeyLength:partitionByKeyLength};